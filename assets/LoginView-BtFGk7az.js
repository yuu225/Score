import{d as x,r as m,u as y,c as h,a as l,w as s,b as n,e as b,f as t,g as _,h as k,i as C,l as B,j as E,t as L,E as u,k as N,o as S,_ as U}from"./index-D2HBG-fb.js";const K={class:"login-container"},M=x({__name:"LoginView",setup(j){const f=N(),r=m(!1),g=y(),e=m({username:"",password:""}),i=async()=>{if(console.log("尝试登录:",e.value),!e.value.username||!e.value.password){u.error("请输入用户名和密码");return}r.value=!0;try{console.log("调用登录方法...");const a=await g.login(e.value.username,e.value.password);console.log("登录结果:",a),a?(u.success("登录成功"),console.log("准备跳转到首页..."),await f.push("/home")):u.error("用户名或密码错误")}catch(a){console.error("登录出错:",a),u.error("登录失败，请重试")}finally{r.value=!1}};return(a,o)=>{const p=n("el-input"),d=n("el-form-item"),v=n("el-button"),w=n("el-form"),V=n("el-card");return S(),h("div",K,[l(V,{class:"login-card"},{header:s(()=>o[2]||(o[2]=[t("h2",{class:"login-title"},"成绩管理系统",-1)])),default:s(()=>[l(w,{model:e.value,"label-width":"0",onSubmit:b(i,["prevent"])},{default:s(()=>[l(d,null,{default:s(()=>[l(p,{modelValue:e.value.username,"onUpdate:modelValue":o[0]||(o[0]=c=>e.value.username=c),placeholder:"用户名","prefix-icon":_(k)},null,8,["modelValue","prefix-icon"])]),_:1}),l(d,null,{default:s(()=>[l(p,{modelValue:e.value.password,"onUpdate:modelValue":o[1]||(o[1]=c=>e.value.password=c),type:"password",placeholder:"密码","prefix-icon":_(B),"show-password":"",onKeyup:C(i,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),l(d,null,{default:s(()=>[l(v,{type:"primary",class:"login-button",loading:r.value,onClick:i},{default:s(()=>[E(L(r.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1}),o[3]||(o[3]=t("div",{class:"login-tips"},[t("p",null,"测试账号："),t("p",null,"管理员账号：admin / 密码：123456"),t("p",null,"普通用户：user / 密码：123456")],-1))]),_:1,__:[3]},8,["model"])]),_:1})])}}}),F=U(M,[["__scopeId","data-v-2cb33454"]]);export{F as default};
