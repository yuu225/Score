import{d as U,u as B,r as x,c as V,a,w as l,b as r,f as n,y,g as i,B as h,C as A,q as M,j as g,t as E,E as m,o as v,_ as S}from"./index-CEwYweYd.js";const j={class:"profile-page"},D={class:"profile-content"},L={class:"avatar-section"},P=["src"],R={class:"avatar-hover"},q={class:"avatar-tips"},z={class:"info-section"},F=U({__name:"Profile",setup(T){const t=B(),o=x({username:t.userInfo.username,realName:t.userInfo.realName,email:t.userInfo.email,phone:t.userInfo.phone,role:t.userInfo.role}),I=_=>{const e=_.raw.type.startsWith("image/"),f=_.raw.size/1024/1024<2;if(!e){m.error("只能上传图片文件！");return}if(!f){m.error("图片大小不能超过 2MB！");return}const p=new FileReader;p.onload=c=>{var s;const u=(s=c.target)==null?void 0:s.result;typeof u=="string"&&(t.setAvatar(u),m.success("头像更新成功"))},p.readAsDataURL(_.raw)},b=()=>{t.setAvatar(""),m.success("头像已删除")},k=()=>{t.setUserInfo(o.value),m.success("个人信息保存成功")};return(_,e)=>{const f=r("el-icon"),p=r("el-upload"),c=r("el-button"),u=r("el-input"),s=r("el-form-item"),w=r("el-tag"),C=r("el-form"),N=r("el-card");return v(),V("div",j,[a(N,null,{header:l(()=>e[4]||(e[4]=[n("div",{class:"card-header"},[n("h2",null,"个人信息")],-1)])),default:l(()=>[n("div",D,[n("div",L,[a(p,{class:"avatar-uploader",action:"#","show-file-list":!1,"auto-upload":!1,"on-change":I,accept:"image/*"},{default:l(()=>[i(t).avatar?(v(),V("img",{key:0,src:i(t).avatar,class:"avatar"},null,8,P)):(v(),y(f,{key:1,class:"avatar-icon"},{default:l(()=>[a(i(h))]),_:1})),n("div",R,[a(f,null,{default:l(()=>[a(i(A))]),_:1}),e[5]||(e[5]=n("span",null,"更换头像",-1))])]),_:1}),n("div",q,[e[7]||(e[7]=n("p",null,"支持 jpg、png、gif 格式，文件小于 2MB",-1)),i(t).avatar?(v(),y(c,{key:0,type:"danger",link:"",onClick:b},{default:l(()=>e[6]||(e[6]=[g(" 删除头像 ")])),_:1,__:[6]})):M("",!0)])]),n("div",z,[a(C,{model:o.value,"label-width":"100px"},{default:l(()=>[a(s,{label:"用户名"},{default:l(()=>[a(u,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.username=d)},null,8,["modelValue"])]),_:1}),a(s,{label:"真实姓名"},{default:l(()=>[a(u,{modelValue:o.value.realName,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.realName=d)},null,8,["modelValue"])]),_:1}),a(s,{label:"邮箱"},{default:l(()=>[a(u,{modelValue:o.value.email,"onUpdate:modelValue":e[2]||(e[2]=d=>o.value.email=d)},null,8,["modelValue"])]),_:1}),a(s,{label:"手机号"},{default:l(()=>[a(u,{modelValue:o.value.phone,"onUpdate:modelValue":e[3]||(e[3]=d=>o.value.phone=d)},null,8,["modelValue"])]),_:1}),a(s,{label:"角色"},{default:l(()=>[a(w,null,{default:l(()=>[g(E(o.value.role),1)]),_:1})]),_:1}),a(s,null,{default:l(()=>[a(c,{type:"primary",onClick:k},{default:l(()=>e[8]||(e[8]=[g("保存修改")])),_:1,__:[8]})]),_:1})]),_:1},8,["model"])])])]),_:1})])}}}),G=S(F,[["__scopeId","data-v-67329687"]]);export{G as default};
